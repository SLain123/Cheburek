"use strict";

function testWebP(e) {
  var t = new Image();
  t.onload = t.onerror = function () {
    e(2 == t.height);
  }, t.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}

testWebP(function (e) {
  1 == e ? document.querySelector("body").classList.add("webp") : document.querySelector("body").classList.add("no-webp");
});

var multiItemSlider = function multiItemSlider(e, t) {
  var o = document.querySelector(e),
      r = o.querySelector(".slider__wrapper"),
      n = o.querySelectorAll(".slider__item"),
      l = o.querySelectorAll(".slider__control"),
      i = (o.querySelector(".slider__control_left"), o.querySelector(".slider__control_right"), parseFloat(getComputedStyle(r).width)),
      s = parseFloat(getComputedStyle(n[0]).width),
      a = 0,
      c = 0,
      u = s / i * 100,
      d = [];
  n.forEach(function (e, t) {
    d.push({
      item: e,
      position: t,
      transform: 0
    });
  });

  var m = {
    getItemMin: function getItemMin() {
      var e = 0;
      return d.forEach(function (t, o) {
        t.position < d[e].position && (e = o);
      }), e;
    },
    getItemMax: function getItemMax() {
      var e = 0;
      return d.forEach(function (t, o) {
        t.position > d[e].position && (e = o);
      }), e;
    },
    getMin: function getMin() {
      return d[m.getItemMin()].position;
    },
    getMax: function getMax() {
      return d[m.getItemMax()].position;
    }
  },
      y = function y(e) {
    var t;
    "right" === e && (++a + i / s - 1 > m.getMax() && (t = m.getItemMin(), d[t].position = m.getMax() + 1, d[t].transform += 100 * d.length, d[t].item.style.transform = "translateX(" + d[t].transform + "%)"), c -= u), "left" === e && (--a < m.getMin() && (t = m.getItemMax(), d[t].position = m.getMin() - 1, d[t].transform -= 100 * d.length, d[t].item.style.transform = "translateX(" + d[t].transform + "%)"), c += u), r.style.transform = "translateX(" + c + "%)";
  },
      p = function p(e) {
    if (e.target.classList.contains("slider__control")) {
      e.preventDefault();
      var t = e.target.classList.contains("slider__control_right") ? "right" : "left";
      y(t);
    }
  };

  return l.forEach(function (e) {
    e.addEventListener("click", p);
  }), {
    right: function right() {
      y("right");
    },
    left: function left() {
      y("left");
    }
  };
},
    slider = multiItemSlider(".slider");

var navLinksArr = document.querySelectorAll(".navigate__menu a"),
    headAnchor = document.querySelector(".first-page__wrapper"),
    aboutAnchor = document.querySelector(".about"),
    menuAnchor = document.querySelector(".menu"),
    reviewAnchor = document.querySelector(".rev"),
    marketAnchor = document.querySelector(".market"),
    contactAnchor = document.querySelector(".contact"),
    targetAnchorArr = [headAnchor, aboutAnchor, menuAnchor, reviewAnchor, marketAnchor, contactAnchor];

var _loop = function _loop(e) {
  navLinksArr[e].addEventListener("click", function () {
    scrollToAnchor(event, e);
  });
};

for (var e = 0; e < navLinksArr.length; e++) {
  _loop(e);
}

function scrollToAnchor(e, t) {
  e.preventDefault(), targetAnchorArr[t].scrollIntoView({
    behavior: "smooth"
  });
}

var burgerOpenBtn = document.querySelector(".burger"),
    burgerCloseBtn = document.querySelector(".burger__close"),
    mainNavMenu = document.querySelector(".navigate__menu");

function displayMenu() {
  mainNavMenu.style.width = "220px", burgerOpenBtn.style.display = "none", burgerCloseBtn.style.display = "block";
}

function hideMenu() {
  mainNavMenu.style.width = "0", burgerOpenBtn.style.display = "block", burgerCloseBtn.style.display = "none";
}

burgerOpenBtn.addEventListener("click", displayMenu), burgerCloseBtn.addEventListener("click", hideMenu);
var sendBtn = document.querySelector(".form__btn"),
    socialBtn = document.querySelectorAll(".footer-icon"),
    modalWindow = document.querySelector(".modal"),
    modalMessage = document.querySelector(".modal__message"),
    modalPhoto = document.querySelector(".modal__picture"),
    closeBtn = document.querySelector(".modal__close-btn"),
    inputsFromForm = document.querySelectorAll(".form input"),
    textareaFromForm = document.querySelector(".form textarea");
sendBtn.addEventListener("click", function () {
  checkInputForm(event);
});

for (var _e = 0; _e < socialBtn.length; _e++) {
  socialBtn[_e].addEventListener("click", function () {
    displayModalWindow(event);
  });
}

function checkInputForm(e) {
  e.preventDefault(), "" != inputsFromForm[0].value && "" != inputsFromForm[1].value ? (textareaFromForm.value = "Абрек ты лучший! Я жду тебя  с самым вкусным чебуреком! Пожалуйста, напиши мне, срочно!", inputsFromForm[0].style.border = "none", inputsFromForm[1].style.border = "none", displayModalWindow(e)) : "" == inputsFromForm[0].value && "" == inputsFromForm[1].value ? (inputsFromForm[0].style.border = "1px red solid", inputsFromForm[1].style.border = "1px red solid") : "" == inputsFromForm[0].value ? (inputsFromForm[0].style.border = "1px red solid", inputsFromForm[1].style.border = "none") : "" == inputsFromForm[1].value && (inputsFromForm[1].style.border = "1px red solid", inputsFromForm[0].style.border = "none");
}

function displayModalWindow(e) {
  e.preventDefault(), modalWindow.style.width = "80%", modalWindow.style.zIndex = "100", closeBtn.style.display = "block", modalPhoto.style.display = "block", modalMessage.style.display = "block", modalMessage.innerHTML = e.target.getAttribute("data-message");
}

function hideModalWindow() {
  modalWindow.style.width = "0", modalWindow.style.zIndex = "-1", closeBtn.style.display = "none", modalPhoto.style.display = "none", modalMessage.style.display = "none";
}

closeBtn.addEventListener("click", hideModalWindow);